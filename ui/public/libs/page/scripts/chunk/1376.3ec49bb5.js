"use strict";(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[1376],{71376:function(e,r,t){t.d(r,{h:function(){return h}});var o=t(98587),n=t(58168),a=t(77387),i=t(96540),c=t(99651),l=t(36607),s=t(50346),p=t(55373),u=t.n(p),f=t(9726),d=["router","match","location","history","store","schema","jumpTo","updateLocation","embedMode"],y=function(e,r,t,o){var n,a=arguments.length,i=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,r,t,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(a<3?n(i):a>3?n(r,t,i):n(r,t))||i);return a>3&&i&&Object.defineProperty(r,t,i),i};function h(e,r,t){var p;void 0===t&&(t="page");var h=(p=function(c){function l(){for(var e,r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return(e=c.call.apply(c,[this].concat(t))||this).env=void 0,e}(0,a.A)(l,c);var p=l.prototype;return p.getEnv=function(){var e=this;if(this.env)return this.env;var r=this.props,o=r.store,a=(0,s._$)(o),i=function(r,t){if(/^\/api\//.test(r))return r;r=r||"";var o=e.props.history.location,n=u().parse(o.search.substring(1));(r=(0,f.pbD)(r.replace(/\$\$/g,u().stringify(n)),n))&&"#"===r[0]?r=o.pathname+o.search+r:r&&"?"===r[0]&&(r=o.pathname+r);var a=r.indexOf("?"),i=r.indexOf("#"),c=~a?r.substring(0,a):~i?r.substring(0,i):r,l=~a?r.substring(a,~i?i:void 0):"",s=~i?r.substring(i):t?o.hash:"";if(c){if("/"!=c[0]&&!/^\w+\:/.test(c)){var p,d=o.pathname.split("/");for(d.pop();p=/^\.\.?\//.exec(c);)"../"===p[0]&&d.pop(),c=c.substring(p[0].length);c=d.concat(c).join("/")}}else c=o.pathname;return c+l+s},c=function(r){var t=e.props.history,o=i(r),n=t.location,a=o,c="",l=o.indexOf("?");if(~l&&(a=o.substring(0,l),c=o.substring(l)),c){if(a!==n.pathname||!n.search)return!1;var s=u().parse(n.search.substring(1)),p=u().parse(c.substring(1));return Object.keys(p).every((function(e){return p[e]===s[e]}))}return a===n.pathname};return this.env=(0,n.A)({},a,{session:t,isCurrentUrl:c,updateLocation:r.updateLocation||function(r,t){var o=e.props.history;return"goBack"===r?o.goBack():/^https?\:\/\//.test(r)?window.location.href=r:void o[t?"replace":"push"](i(r,t))},jumpTo:r.jumpTo||function(r,t){var o=e.props.history;if("goBack"===r)return o.goBack();r=i(r),c(r)||(t&&"url"===t.actionType?!1===t.blank?window.location.href=r:window.open(r,"_blank"):t&&t.blank?window.open(r,"_blank"):/^https?:\/\//.test(r)?window.location.href=r:o.push(r))},affixOffsetTop:r.embedMode?0:50})},p.render=function(){var t,a=this.props,c=(a.router,a.match),l=a.location,s=(a.history,a.store),p=a.schema,u=(a.jumpTo,a.updateLocation,a.embedMode,(0,o.A)(a,d)),y=p||e;return y.type||(y=(0,n.A)({},y,{type:"page"})),t=(0,f.XXf)(y,(0,n.A)({data:f.WpD.createObject((0,n.A)({},c.params,{amisStore:s,pathname:l.pathname,params:c.params}))},u,{fetcher:s.fetcher,notify:s.notify,alert:s.alert,copy:s.copy,propsTransform:r,theme:s.theme}),this.getEnv()),i.createElement(i.Fragment,null,t)},l}(i.Component),p.displayName="SchemaRenderer",p);return h=y([(0,l.WQ)("store"),l.PA],h),(0,c.y)(h)}r.A=h({type:"page",body:{type:"page",body:[{type:"spinner",show:!0,tip:"加载中..."}]}})},74765:function(e){var r=String.prototype.replace,t=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,t,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},55373:function(e,r,t){var o=t(98636),n=t(62642),a=t(74765);e.exports={formats:a,parse:n,stringify:o}},62642:function(e,r,t){var o=t(37720),n=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:o.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},i=function(e,r,t){if(e){var o=t.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(o),c=i?o.slice(0,i.index):o,l=[];if(c){if(!t.plainObjects&&n.call(Object.prototype,c)&&!t.allowPrototypes)return;l.push(c)}for(var s=0;null!==(i=a.exec(o))&&s<t.depth;){if(s+=1,!t.plainObjects&&n.call(Object.prototype,i[1].slice(1,-1))&&!t.allowPrototypes)return;l.push(i[1])}return i&&l.push("["+o.slice(i.index)+"]"),function(e,r,t){for(var o=r,n=e.length-1;n>=0;--n){var a,i=e[n];if("[]"===i&&t.parseArrays)a=[].concat(o);else{a=t.plainObjects?Object.create(null):{};var c="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,l=parseInt(c,10);t.parseArrays||""!==c?!isNaN(l)&&i!==c&&String(l)===c&&l>=0&&t.parseArrays&&l<=t.arrayLimit?(a=[])[l]=o:"__proto__"!==c&&(a[c]=o):a={0:o}}o=a}return o}(l,r,t)}};e.exports=function(e,r){var t=r?o.assign({},r):{};if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(t.ignoreQueryPrefix=!0===t.ignoreQueryPrefix,t.delimiter="string"==typeof t.delimiter||o.isRegExp(t.delimiter)?t.delimiter:a.delimiter,t.depth="number"==typeof t.depth?t.depth:a.depth,t.arrayLimit="number"==typeof t.arrayLimit?t.arrayLimit:a.arrayLimit,t.parseArrays=!1!==t.parseArrays,t.decoder="function"==typeof t.decoder?t.decoder:a.decoder,t.allowDots="boolean"==typeof t.allowDots?t.allowDots:a.allowDots,t.plainObjects="boolean"==typeof t.plainObjects?t.plainObjects:a.plainObjects,t.allowPrototypes="boolean"==typeof t.allowPrototypes?t.allowPrototypes:a.allowPrototypes,t.parameterLimit="number"==typeof t.parameterLimit?t.parameterLimit:a.parameterLimit,t.strictNullHandling="boolean"==typeof t.strictNullHandling?t.strictNullHandling:a.strictNullHandling,""===e||null==e)return t.plainObjects?Object.create(null):{};for(var c="string"==typeof e?function(e,r){for(var t={},o=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=r.parameterLimit===1/0?void 0:r.parameterLimit,c=o.split(r.delimiter,i),l=0;l<c.length;++l){var s,p,u=c[l],f=u.indexOf("]="),d=-1===f?u.indexOf("="):f+1;-1===d?(s=r.decoder(u,a.decoder),p=r.strictNullHandling?null:""):(s=r.decoder(u.slice(0,d),a.decoder),p=r.decoder(u.slice(d+1),a.decoder)),n.call(t,s)?t[s]=[].concat(t[s]).concat(p):t[s]=p}return t}(e,t):e,l=t.plainObjects?Object.create(null):{},s=Object.keys(c),p=0;p<s.length;++p){var u=s[p],f=i(u,c[u],t);l=o.merge(l,f,t)}return o.compact(l)}},98636:function(e,r,t){var o=t(37720),n=t(74765),a={brackets:function(e){return e+"[]"},indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},i=Array.isArray,c=Array.prototype.push,l=function(e,r){c.apply(e,i(r)?r:[r])},s=Date.prototype.toISOString,p={delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1},u=function e(r,t,n,a,c,s,u,f,d,y,h,b){var m=r;if("function"==typeof u?m=u(t,m):m instanceof Date&&(m=y(m)),null===m){if(a)return s&&!b?s(t,p.encoder):t;m=""}if("string"==typeof m||"number"==typeof m||"boolean"==typeof m||o.isBuffer(m))return s?[h(b?t:s(t,p.encoder))+"="+h(s(m,p.encoder))]:[h(t)+"="+h(String(m))];var g,v=[];if(void 0===m)return v;if(i(u))g=u;else{var j=Object.keys(m);g=f?j.sort(f):j}for(var O=0;O<g.length;++O){var w=g[O];c&&null===m[w]||(i(m)?l(v,e(m[w],n(t,w),n,a,c,s,u,f,d,y,h,b)):l(v,e(m[w],t+(d?"."+w:"["+w+"]"),n,a,c,s,u,f,d,y,h,b)))}return v};e.exports=function(e,r){var t=e,c=r?o.assign({},r):{};if(null!==c.encoder&&void 0!==c.encoder&&"function"!=typeof c.encoder)throw new TypeError("Encoder has to be a function.");var s=void 0===c.delimiter?p.delimiter:c.delimiter,f="boolean"==typeof c.strictNullHandling?c.strictNullHandling:p.strictNullHandling,d="boolean"==typeof c.skipNulls?c.skipNulls:p.skipNulls,y="boolean"==typeof c.encode?c.encode:p.encode,h="function"==typeof c.encoder?c.encoder:p.encoder,b="function"==typeof c.sort?c.sort:null,m=void 0!==c.allowDots&&c.allowDots,g="function"==typeof c.serializeDate?c.serializeDate:p.serializeDate,v="boolean"==typeof c.encodeValuesOnly?c.encodeValuesOnly:p.encodeValuesOnly;if(void 0===c.format)c.format=n.default;else if(!Object.prototype.hasOwnProperty.call(n.formatters,c.format))throw new TypeError("Unknown format option provided.");var j,O,w=n.formatters[c.format];"function"==typeof c.filter?t=(O=c.filter)("",t):i(c.filter)&&(j=O=c.filter);var A,k=[];if("object"!=typeof t||null===t)return"";A=c.arrayFormat in a?c.arrayFormat:"indices"in c?c.indices?"indices":"repeat":"indices";var x=a[A];j||(j=Object.keys(t)),b&&j.sort(b);for(var D=0;D<j.length;++D){var P=j[D];d&&null===t[P]||l(k,u(t[P],P,x,f,d,y?h:null,O,b,m,g,w,v))}var L=k.join(s),N=!0===c.addQueryPrefix?"?":"";return L.length>0?N+L:""}},37720:function(e){var r=Object.prototype.hasOwnProperty,t=function(){for(var e=[],r=0;r<256;++r)e.push("%"+((r<16?"0":"")+r.toString(16)).toUpperCase());return e}(),o=function(e,r){for(var t=r&&r.plainObjects?Object.create(null):{},o=0;o<e.length;++o)void 0!==e[o]&&(t[o]=e[o]);return t};e.exports={arrayToObject:o,assign:function(e,r){return Object.keys(r).reduce((function(e,t){return e[t]=r[t],e}),e)},compact:function(e){for(var r=[{obj:{o:e},prop:"o"}],t=[],o=0;o<r.length;++o)for(var n=r[o],a=n.obj[n.prop],i=Object.keys(a),c=0;c<i.length;++c){var l=i[c],s=a[l];"object"==typeof s&&null!==s&&-1===t.indexOf(s)&&(r.push({obj:a,prop:l}),t.push(s))}return function(e){for(var r;e.length;){var t=e.pop();if(r=t.obj[t.prop],Array.isArray(r)){for(var o=[],n=0;n<r.length;++n)void 0!==r[n]&&o.push(r[n]);t.obj[t.prop]=o}}return r}(r)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(r){return e}},encode:function(e){if(0===e.length)return e;for(var r="string"==typeof e?e:String(e),o="",n=0;n<r.length;++n){var a=r.charCodeAt(n);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?o+=r.charAt(n):a<128?o+=t[a]:a<2048?o+=t[192|a>>6]+t[128|63&a]:a<55296||a>=57344?o+=t[224|a>>12]+t[128|a>>6&63]+t[128|63&a]:(n+=1,a=65536+((1023&a)<<10|1023&r.charCodeAt(n)),o+=t[240|a>>18]+t[128|a>>12&63]+t[128|a>>6&63]+t[128|63&a])}return o},isBuffer:function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,n,a){if(!n)return t;if("object"!=typeof n){if(Array.isArray(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(a&&(a.plainObjects||a.allowPrototypes)||!r.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var i=t;return Array.isArray(t)&&!Array.isArray(n)&&(i=o(t,a)),Array.isArray(t)&&Array.isArray(n)?(n.forEach((function(o,n){if(r.call(t,n)){var i=t[n];i&&"object"==typeof i&&o&&"object"==typeof o?t[n]=e(i,o,a):t.push(o)}else t[n]=o})),t):Object.keys(n).reduce((function(t,o){var i=n[o];return r.call(t,o)?t[o]=e(t[o],i,a):t[o]=i,t}),i)}}}}]);