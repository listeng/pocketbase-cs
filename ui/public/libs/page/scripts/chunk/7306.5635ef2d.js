"use strict";(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[7306,3944],{83944:function(e,t,a){a.r(t);var n=a(96540);t.default=function(){return n.createElement("div",{style:{height:"80vh",margin:"0px auto",display:"flex",justifyContent:"center",alignItems:"center"}},"没有找到页面")}},67306:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var n=a(58168),i=a(96540),l=a(36607),r=a(9726),o=a(99651),c=a(71519),s=a(83944),d=a(71376),m=a(98587),u=["onConfirm","pages"],p=(0,d.h)({type:"dialog",title:"新增页面",body:{type:"form",controls:[{type:"text",label:"名称",name:"label",validations:{maxLength:20},required:!0},{type:"text",label:"代码",name:"path",validations:{isUrlPath:!0},required:!0,validate:function(e,t){return e.pages.filter((function(e){return e.path===t})).length?"当前代码已被占用，请换一个":""}}]}},(function(e){var t=e.onConfirm,a=e.pages,i=(0,m.A)(e,u);return(0,n.A)({},i,{data:{pages:a},onConfirm:function(e){return t&&t(e[0])}})})),f=(0,l.WQ)("store")((0,l.PA)((function(e){var t,a,l=e.store,m=e.location,u=e.history;return(0,i.useEffect)((function(){l.loadPages()}),[l]),i.createElement(r.PEP,{aside:(t=l.pages.map((function(e){return{label:e.label,path:"/"+e.path,icon:e.icon}})),a=t.map((function(e){return e.path})),i.createElement(r.aeI,{key:l.asideFolded?"folded-aside":"aside",navigations:[{label:"页面列表",children:t}],renderLink:function(e){var t=e.link,n=e.toggleExpand,o=e.classnames,s=e.depth;if(t.hidden)return null;var d=[];return t.children&&d.push(i.createElement("span",{key:"expand-toggle",className:o("AsideNav-itemArrow"),onClick:function(e){return n(t,e)}})),t.badge&&d.push(i.createElement("b",{key:"badge",className:o("AsideNav-itemBadge",t.badgeClassName||"bg-info")},t.badge)),t.icon?d.push(i.createElement("i",{key:"icon",className:o("AsideNav-itemIcon",t.icon)})):l.asideFolded&&1===s&&d.push(i.createElement("i",{key:"icon",className:o("AsideNav-itemIcon",t.children?"fa fa-folder":"fa fa-info")})),d.push(i.createElement("i",{key:"delete","data-tooltip":"删除","data-position":"bottom",className:"navbtn fa fa-times",onClick:function(e){e.preventDefault(),(0,r.lJp)("确认要删除").then((function(e){e&&l.removePageAt(a.indexOf(t.path))}))}})),d.push(i.createElement("i",{key:"edit","data-tooltip":"编辑","data-position":"bottom",className:"navbtn fa fa-pencil",onClick:function(e){e.preventDefault(),u.push("/edit/"+l.pages[a.indexOf(t.path)].id)}})),d.push(i.createElement("span",{key:"label",className:o("AsideNav-itemLabel")},t.label)),t.path?t.active?i.createElement("a",null,d):i.createElement(c.N_,{to:"/"===t.path[0]?t.path:""+t.path},d):i.createElement("a",{onClick:t.onClick?t.onClick:t.children?function(){return n(t)}:void 0},d)},isActive:function(e){return function(e,t){return!!(0,o.B6)(null==t?void 0:t.pathname,{path:e?e.replace(/\?.*$/,""):"",exact:!0,strict:!0})}(e.path&&"/"===e.path[0]?e.path:""+e.path,m)}})),header:i.createElement(i.Fragment,null,i.createElement("div",{className:"cxd-Layout-brandBar"},i.createElement("div",{className:"cxd-Layout-brand text-ellipsis"},i.createElement("i",{className:"fa fa-paw"}),i.createElement("span",{className:"hidden-folded m-l-sm"},"页面编辑器"))),i.createElement("div",{className:"cxd-Layout-headerBar"},i.createElement("div",{className:"hidden-xs p-t-sm ml-auto px-2"},i.createElement(r.$nd,{size:"sm",level:"info",onClick:function(){return l.setAddPageIsOpen(!0)}},"新增页面")))),folded:l.asideFolded,offScreen:l.offScreen},i.createElement(o.dO,null,l.pages.map((function(e){return i.createElement(o.qh,{key:e.id,path:"/"+e.path,render:function(){return i.createElement(d.A,{schema:e.schema})}})})),i.createElement(o.qh,{component:s.default})),i.createElement(p,{show:l.addPageIsOpen,onClose:function(){return l.setAddPageIsOpen(!1)},onConfirm:function(e){l.addPage((0,n.A)({},e,{schema:{type:"page",title:e.label,body:"这是你刚刚新增的页面。"}})),l.setAddPageIsOpen(!1)},pages:l.pages.concat()}))})))}}]);